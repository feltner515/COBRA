# TriPinHexAssemblyGenerator

!syntax description /Mesh/TriPinHexAssemblyGenerator

## Overview

The `TriPinHexAssemblyGenerator` object generates a 2D hexagonal assembly mesh consisting of three diamond sections. Each of these sections may contain one pin defined as a series of concentric circles. An example of such an assembly mesh is illustrated in [assembly].

!media reactor/meshgenerators/tri_pin.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=assembly
      caption=A typical mesh generated by this `TriPinHexAssemblyGenerator` object with one large-circular-pin section, one small-circular-pin section, and one pin-free section.

The size of the assembly is defined by [!param](/Mesh/TriPinHexAssemblyGenerator/hexagon_size). Users can input either radius (which is the same as side length for a hexagon) or apothem of the hexagon by setting [!param](/Mesh/TriPinHexAssemblyGenerator/hexagon_size_style). On each side of the hexagon, the azimuthal meshing density is controlled by [!param](/Mesh/TriPinHexAssemblyGenerator/num_sectors_per_side). The nodes on each side are =+uniformly distributed+=.

The hexagon is naturally divided azimuthally into three diamond sections. The first diamond section has an optional pin at 12 o'clock (90 degrees) from the center of the hexagon; the second diamond section has an optional pin at 8 o'clock (210 degrees); and the third diamond section has an optional pin at at 4 o'clock (330 degrees). [!param](/Mesh/TriPinHexAssemblyGenerator/ring_radii) is a 2D vector parameter that is used to define concentric ring regions within the diamond sections from one through three. [!param](/Mesh/TriPinHexAssemblyGenerator/ring_intervals) defines the number of radial meshing subintervals for each of the concentric rings. Optionally, [!param](/Mesh/TriPinHexAssemblyGenerator/ring_block_ids) and [!param](/Mesh/TriPinHexAssemblyGenerator/ring_block_names) can be used to assign block ids/names to these rings. For all the four aforementioned ring-related parameters, if only one vector is provided instead of three, the same ring parameters will be adopted for all three sections, providing a concise way to define 3 identical pins. The default center of a pin is halfway between the hexagon center and a vertex point (half the hexagon's radius). The center of the pin may be offset radially from the center of the diamond by a distance defined by [!param](/Mesh/TriPinHexAssemblyGenerator/ring_offset). A positive [!param](/Mesh/TriPinHexAssemblyGenerator/ring_offset) means the center of the concentric rings is radially offset towards to the assembly boundary. A negative [!param](/Mesh/TriPinHexAssemblyGenerator/ring_offset) means the center of the concentric rings is radially offset closer to the assembly center. Users can set [!param](/Mesh/TriPinHexAssemblyGenerator/preserve_volumes) as `true` to correct the polygonization effect and preserve ring volume.

The nodes on each interface between the two diamond sections are also =+uniformly distributed+= with the same number of nodes determined by [!param](/Mesh/TriPinHexAssemblyGenerator/num_sectors_per_side). Therefore, the azimuthal intervals of each diamond section are non-uniform and are determined based on three factors: [!param](/Mesh/TriPinHexAssemblyGenerator/num_sectors_per_side), [!param](/Mesh/TriPinHexAssemblyGenerator/ring_offset) and the constraints due to the uniformly distributed nodes on external sides as well as interfaces between diamond sections.

Each diamond section also contains a "background" region, which is the region outside the concentric rings (or the full diamond, if no rings are present). The background radial intervals and block id of each diamond can be defined by [!param](/Mesh/TriPinHexAssemblyGenerator/background_intervals) and [!param](/Mesh/TriPinHexAssemblyGenerator/background_block_ids)/[!param](/Mesh/TriPinHexAssemblyGenerator/background_block_names). In most cases, [!param](/Mesh/TriPinHexAssemblyGenerator/background_block_ids) and [!param](/Mesh/TriPinHexAssemblyGenerator/background_block_names) have a length of one if provided. However, if there exists a least one ring-free section, lengths of [!param](/Mesh/TriPinHexAssemblyGenerator/background_block_ids) and [!param](/Mesh/TriPinHexAssemblyGenerator/background_block_names) need to be two to accommodate the additional triangular element region required when no pin exists at the center of the diamond.

The `TriPinHexAssemblyGenerator` generates a complete set of `MeshMetaData` needed for future stitching with other assemblies. Therefore, meshes generated by this object can be directly used in [!param](/Mesh/PatternedHexMeshGenerator/inputs) of [`PatternedHexMeshGenerator`](/PatternedHexMeshGenerator.md) to form a core mesh.

As mentioned, by default (i.e., [!param](/Mesh/TriPinHexAssemblyGenerator/assembly_orientation) is set as `pin_up`), the first section is at 12 o'clock. The assembly can be rotated by 180$^{\circ}$ by setting [!param](/Mesh/TriPinHexAssemblyGenerator/assembly_orientation) as `pin_down`.

Optionally, users can also assign an element extra integer for each diamond sections. The name of the element extra integer is defined by [!param](/Mesh/TriPinHexAssemblyGenerator/pin_id_name), while the assigned values of the three sections are defined by a three-element vector parameter, [!param](/Mesh/TriPinHexAssemblyGenerator/pin_id_values). If [!param](/Mesh/TriPinHexAssemblyGenerator/assembly_orientation) is set as `pin_up`, the first element of [!param](/Mesh/TriPinHexAssemblyGenerator/pin_id_values) is assigned to the top section; the second element is assigned to the lower-left section; and the third element is assigned to the lower-right section. On the other hand,  If [!param](/Mesh/TriPinHexAssemblyGenerator/assembly_orientation) is set as `pin_down`, the first element of [!param](/Mesh/TriPinHexAssemblyGenerator/pin_id_values) is assigned to the bottom section; the second element is assigned to the upper-right section; and the third element is assigned to the upper-left section.
Additionally, users can assign the element extra integers ([reporting IDs](PolygonConcentricCircleMeshGenerator.md#reporting-id-assignment)) for annular rings and sectors by defining [!param](/Mesh/TriPinHexAssemblyGenerator/ring_id_name) and [!param](/Mesh/TriPinHexAssemblyGenerator/sector_id_name), respectively.

## Example Syntax

!listing modules/reactor/test/tests/meshgenerators/tri_pin_hex_assemby_generator/tri_pin.i block=Mesh

!syntax parameters /Mesh/TriPinHexAssemblyGenerator

!syntax inputs /Mesh/TriPinHexAssemblyGenerator

!syntax children /Mesh/TriPinHexAssemblyGenerator
