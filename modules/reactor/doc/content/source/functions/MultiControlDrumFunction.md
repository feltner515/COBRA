# MultiControlDrumFunction

!syntax description /Functions/MultiControlDrumFunction

## Overview

`MultiControlDrumFunction` is a Function object that assigns values for the absorber volume fraction. This is useful for simulating control drums rotation during power transients. It must be used with a mesh generated by [`PatternedHexMeshGenerator`](/PatternedHexMeshGenerator.md) so as to get access to the essential `MeshMetaData`. This `MultiControlDrumFunction` is capable of handling multiple control drums within a single mesh.

## Principles

A control drum is a common reactivity control approach. It usually has a cylindrical geometry with an outer ring containing both absorber (yellow) and reflector (blue) sections (see [Figure 1](#control_drum)). Using this `MultiControlDrumFunction` object, the rotation of the absorber section can be simulated. The entire ring needs to be a single block, while this Function object creates a time and space dependent function to represent the volume percentage of the absorber in this ring block. The function is supposed to work with either [`FunctionAux`](/FunctionAux.md) to assign value to an elemental auxiliary variable, or [`GenericFunctionMaterial`](/GenericFunctionMaterial.md) to assign value to a material property. There are three possible scenarios:

- If the entire mesh element is within the absorber section, the function value is 100 (percent absorber);
- If the entire mesh element is within the reflector section, the function value is 0 (percent absorber);
- If the mesh element is intercepted by the absorber-reflector boundary, the function value is between 0 and 100 and equal to the volume percentage of the absorber part in that mesh element.

!media reactor/functions/rotate_control_drum.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=schematic
      caption=A schematic drawing showing a typical control drum structure and important parameters of this `MultiControlDrumFunction` object.

## Key Parameters

To simulate the rotation of the control drums, a set of parameters are needed for each control drum (see [Figure 1](#control_drum)):

- [!param](/Functions/MultiControlDrumFunction/start_angles): the azimuthal angles of the starting positions of the absorber sections at the beginning of rotation;
- [!param](/Functions/MultiControlDrumFunction/angle_ranges): the azimuthal angle ranges of the absorber sections;
- [!param](/Functions/MultiControlDrumFunction/angular_speeds): the rotation speeds of the control drums in degree per second (positive values mean counterclockwise rotation; negative values mean clockwise rotation.)

By default, rotation of the control drums starts at t = 0 and never ends. Optionally, users can set up [!param](/Functions/MultiControlDrumFunction/rotation_start_time) and [!param](/Functions/MultiControlDrumFunction/rotation_end_time) to customize the control drums rotation time.

When [!param](/Functions/MultiControlDrumFunction/use_control_drum_id) is true, this `MultiControlDrumFunction` can also use the element extra integer `control_drum_id` in the mesh to determine the domain of each control drum. Please refer to [`PatternedHexMeshGenerator`](/PatternedHexMeshGenerator.md) for details on how `control_drum_id`'s are assigned. If [!param](/Functions/MultiControlDrumFunction/use_control_drum_id) is false, the domain of each control drum is determined based on the nearest control drum position.

!media reactor/functions/multi_cds.png
      style=display: block;margin-left:auto;margin-right:auto;width:40%;
      id=multi_drums
      caption=An example of control drums simulated by this `MultiControlDrumFunction` object (see [input file](modules/reactor/test/tests/functions/multi_control_drum_function/multi_cd.i) here).

## Example Syntax

!listing modules/reactor/test/tests/functions/multi_control_drum_function/multi_cd.i block=Functions

!syntax parameters /Functions/MultiControlDrumFunction

!syntax inputs /Functions/MultiControlDrumFunction

!syntax children /Functions/MultiControlDrumFunction
