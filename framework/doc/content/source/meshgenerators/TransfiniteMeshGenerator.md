# TransfiniteMeshGenerator

The `TransfiniteMeshGenerator` produces two-dimensional meshes from a set of 4 corner vertices by interpolating the edges into the inner domain. The resulting mesh  consists of QUAD4 elements of aspect ratio and skewness determined by the points on the boundary edges.

!syntax description /Mesh/TransfiniteMeshGenerator

!media large_media/framework/meshgenerators/quad_convention.png style=float:right;width:20%;margin-left:2%; caption=Fig. 1: Convention for the corner vertices order.


## Overview

&nbsp;

Given a set of 4 corners the TransfiniteMeshGenerator constructs by default the straight edges that connect the vertices and fills up the interior with straight lines. The test, [quadrilater_generator.i](test/tests/meshgenerators/transfinite_generator/quadrilater_generator.i),
illustrates the use of the `TransfiniteMeshGenerator` object to construct general quadrilaterals as in Fig. 2. By default the distribution of points along edges is considered equidistant, unless specified otherwise by the user using the parameters `bias_x` or `bias_y`. The core of the algorithm interpolates/fills up the inner domain for any edge type, curved, parametrized, discrete. The current implementation considers all these cases with special attention given to arcs of a circle which are widely encountered in scientific computing applications. 

The convention for the corners numbering should follow Fig. 1, prescribed in the order +(0,0) - (0,1) - (1,1) - (1,0)+. The direction along edges, important if the user provides them using the DISCRETE option, should follow the direction of the arrows as in Fig. 1.


!media large_media/framework/meshgenerators/transfinite_quadrilateral_sm.png style=float:right;margin:2%;width:20%; caption=Fig. 2: A quadrilateral with one edge on an arc circle.


This generator allows any type of curvilinear edges. In Fig. 3 we show a mesh where the top edge has an inward arc circle. However, this algorithm generates a mesh for any parametrized edge, or given set of points on an edge. For arcs of a circle, since they are widely encountered in applications, we customized an approach that requires a user to specify only the deviation from a straight line in the middle of an edge. 

The default distribution of points on an edge is equidistant and nothing explicit needs to be specified. However, for meshes that need to capture more scales in different regions we have two additional options that can be prescribed.  The distribution of points on an edge can be either provided as a discrete set of points, using the edge type `DISCRETE`, or as a bias along the edge. The only requirement is that opposite edges have the same number of points.

## Example 


!media large_media/framework/meshgenerators/transfinite_arccircle_annular_sm.png style=float:right;margin:2%;width:18%; caption=Fig. 3: Annulus section generated using `CIRCARC` edges.


&nbsp;

This mesh generator considers 4 types of edges, each of which should have a type defined in "edge"`_type`, where "edge" is either `left`, `right`, `top` or `bottom`.  For some edge types, an edge parameter, similarly named "edge"`_parameter`, is necessary to define the shape of the edge.

Admissible types are:

  - `LINE` - constructs a line between the already-provided corner vertices. A quadrilateral can be obtained only with line sides as in Fig. 2.

  - `CIRCARC` - constructs an arc of a circle, based on a required edge parameter. This parameter can be the distance at the middle of an edge between a straight line and the arc of circle desired, as in the test [arccircle_generator.i](test/tests/meshgenerators/transfinite_generator/arcircle_generator.i). The edge is then generated by computing the middle point on the edge. The deviation from a straight line is set by convention to be positive if the arc circle is outward, or negative if inward, in this fashion the user can specify different orientations, as in Fig. 4.
  The midpoint could instead be obtained from a QUAD8 element as provided by an external mesh generator and inserted as input by the user in the same  edge parameter, as in the test [arccircle_midpoint_generator.i](test/tests/meshgenerators/transfinite_generator/arcircle_midpoint_generator.i). Different point distributions along arc circles can be prescribed as for the other edge types and propagate via the polar coordinates parametrization.

&nbsp;

!media large_media/framework/meshgenerators/transfinite_discrete_arccircle_sm.png style=float:right;margin:2%;width:30%; caption=Fig. 4: A domain with edge types `CIRCARC` and `DISCRETE`.


!listing test/tests/meshgenerators/transfinite_generator/discrete_generator.i
    block=Mesh/transf


  - `DISCRETE` - constructs a line along a set of points, provided by the user in a required edge parameter.  Coordinates for each point are separated by whitespace, and points are separated by newlines.  Points are connected in the order represented by arrows in Fig. 1.  A test is available in [discrete_generator.i](test/tests/meshgenerators/transfinite_generator/discrete_generator.i) and illustrated in Fig. 4. This option is the only one that does not support a different point redistribution via the options `bias_x` and `bias_y`; these will have no effect, since it is assumed the user desires their edge points exactly as specified. 

  - `PARSED` - constructs a curvilinear edge, as provided by a parametric function specified in the corresponding edge parameter.  In this parameter, the function to be parsed should be a map from the unit interval `r=[0,1]`, with the output `x` and `y` components separated by a semicolon.  The test [parsed_generator.i](test/tests/meshgenerators/transfinite_generator/parsed_generator.i) illustrates this by constructing a stenotic pipe mesh using parsed top and bottom edges.


!media large_media/framework/meshgenerators/transfinite_parsed_bias_sm.png style=float:right;margin:2%;width:30%; caption=Fig. 5: A stenotic pipe generated using parametrized edges using  `PARSED` and different point distributions (`bias_x`, `bias_y`).


!listing test/tests/meshgenerators/transfinite_generator/parsed_biased_generator.i
    block=Mesh/transf


Since opposite sides need to have the same number of points, we consider top-bottom edges to have `nx` points, and left-right edges `ny` points. By default they are taken to be equidistant, unless the user specifies a distancing via the parameters `bias_x` or `bias_y`. Different point distributions can propagate on curvilinear edges, generating domains as in Fig. 5. Note that the bias along an edge is implemented as propapagted by the parametrization, so for a parametrized edge $x(r),\ y(r)$ the bias is constructed first for the parameter $r$ and propagated as the parametrized edge is generated. 


!syntax parameters /Mesh/TransfiniteMeshGenerator

!syntax inputs /Mesh/TransfiniteMeshGenerator

!syntax children /Mesh/TransfiniteMeshGenerator
